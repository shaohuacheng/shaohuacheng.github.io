---
layout: post
title: "Linux 学习笔记(5)-用户与用户组"
date: 2016-12-27 
description: "Linux学习笔记(5)-用户与用户组"
tag: Linux 
---   

## 前言

要介绍权限管理的命令前，不得不先了解下Linux中的权限管理及用户与用户组的相关概念。

****



**1.用户与用户组基本概念**

假设一个公司有两个竞争的团队，第一个团队名为projecta，里面有成员class1,class2,class3，第二个团队名为projectb，里面有成员class4,class5,class6。
两个团队有竞争性质，却要交纳同一份报告。同时，同一个团队之间由于需要内部协作办公，同一团队之间的很多数据是可以互相修改和查看的。


作为两个团队的总监，有可能需要同时查看两个团队的进度。那么可以设置一个主账号leader，这个账号同时支持两个用户组，每个团队的成员属于一个用户组，每个成员是一个用户。
这就是用户和用户组的概念。对于同一个用户组的用户，用户组内的资源是可以共享的，可以互相修改和查看。当然，每个用户也可以有一些私有的文件。


**2.文件属性**

在Linux的命令行中输入"ls -al"，可以查看当前工作目录下的文件及属性。

    [root@localhost test]# ls -al 
    -rw-r--r--    1   root   root   191   Jan  6 2016 tempfile

输入命令后，每行显示一个文件，每个文件有上述几列，分别代表以下含义：

(1)第一列：文件类型和权限

第一个字符代表这个文件的类型，如：目录(d)、文件(-)、连接(l)、可供存储的接口设备(b)、串行端口设备(c)等。
比较常见的是d代表它是一个目录，-代表是一个文件。

第一列中接下来的9个字符，以3个为一组，共3组。这3组分别对应的是“文件所有者的权限(owner)”、“同用户组的权限(group)”和“其他非本用户组用户的权限(others)”。
每组的三个字符是rwx的这三个参数的组合，其中[r]代表可读(read)、[w]代表可写(write)、[x]代表可执行(execute)。要注意的是，这3个权限的位置不会改变，如果没有对应的权限，则该位置用-代替。

对应的，当用命令来更改权限(如chmod)时，可用数字类型进行更改。即，每个权限均可以用一个数字来描述。

每个文件的权限分为3组，每组分别对应0~7的一个数字，这样每个文件权限对应一个3位数。

对于每种身份(owner、group、others)的各自三个权限(r、w、x)分别对应数字4、2、1，如果有对应权限，则将对应数字累加。

例如：当权限为-rwxr-x---时，数字为：

    owner = rwx = 4+2+1 = 7
    group = r-x = 4+0+1 = 5
    others = --- = 0+0+0 = 0

因此，该文件的权限数字为750


(2)第二列：多少个文件名连接到此节点

(3)第三列：这个文件的“所有者账号”

(4)第四列：这个文件的所属用户组

(5)第五列：这个文件的大小，单位为B

(6)第六列：这个文件的创建日期或最新修改日期

(7)第七列：文件名



**3.查看用户组信息**

groups 查看当前登录用户的组内成员
groups gliethttp 查看gliethttp用户所在的组,以及组内成员
whoami 查看当前登录用户名


**4.Linux用户组记录文件**

在Linux系统中，默认情况下所有的系统上的账号与一般身份用户，还有root的相关信息，都是记录在/etc/passwd文件中，
个人密码则记录在/etc/shadow文件下。所有的组名记录在/etc/group内。

1、关于/etc/group 

/etc/group 文件是用户组的配置文件，内容包括用户和用户组，并且能显示出用户是归属哪个用户组或哪几个用户组，因为一个用户可以归属一个或多个不同的用户组；同一用 户组的用户之间具有相似的特征。比如我们把某一用户加入到root用户组，那么这个用户就可以浏览root用户家目录的文件，如果root用户把某个文件 的读写执行权限开放，root用户组的所有用户都可以修改此文件，如果是可执行的文件（比如脚本），root用户组的用户也是可以执行的；

用户组的特性在系统管理中为系统管理员提供了极大的方便，但安全性也是值得关注的，如某个用户下有对系统管理有最重要的内容，最好让用户拥有独立的用户组，或者是把用户下的文件的权限设置为完全私有；另外root用户组一般不要轻易把普通用户加入进去。

2、/etc/group 内容格式

/etc/group 的内容包括用户组（Group）、用户组口令、GID及该用户组所包含的用户（User），每个用户组一条记录；格式如下：

group_name:passwd:GID:user_list

在/etc/group 中的每条记录分四个字段：

第一字段：用户组名称；

第二字段：用户组密码；

第三字段：GID

第四字段：用户列表，每个用户之间用,号分割；本字段可以为空；如果字段为空表示用户组为GID的用户名；


