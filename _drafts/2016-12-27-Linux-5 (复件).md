---
layout: post
title: "Linux 学习笔记-常用Linux命令(5)：文件权限和属性1"
date: 2016-12-27 
description: "Linux学习笔记-常用Linux命令(5)：文件权限和属性1，首先介绍Linux中的文件权限管理，再介绍几个权限和属性相关的命令，如chgrp、chown、chmod、touch等"
tag: Linux 
---   

## 前言

要介绍更改权限的命令前，不得不先了解下Linux中的权限管理方式。
本文首先介绍Linux中的权限管理，再介绍几个常见的权限和属性相关的命令，如chgrp、chown、chmod、touch等"

* [1.Linux权限管理](#1)

* [2.chgrp命令](#2)

* [3.chown命令](#3)

* [4.chmod命令](#4)

* [5.touch命令](#5)


****


<h2 id="1">1.Linux权限管理 </h2>

**1.用户与用户组基本概念**

假设一个公司有两个竞争的团队，第一个团队名为projecta，里面有成员class1,class2,class3，第二个团队名为projectb，里面有成员class4,class5,class6。
两个团队有竞争性质，却要交纳同一份报告。同时，同一个团队之间由于需要内部协作办公，同一团队之间的很多数据是可以互相修改和查看的。


作为两个团队的总监，有可能需要同时查看两个团队的进度。那么可以设置一个主账号leader，这个账号同时支持两个用户组，每个团队的成员属于一个用户组，每个成员是一个用户。
这就是用户和用户组的概念。对于同一个用户组的用户，用户组内的资源是可以共享的，可以互相修改和查看。当然，每个用户也可以有一些私有的文件。


**2.文件属性**

在Linux的命令行中输入"ls -al"，可以查看当前工作目录下的文件及属性。

    [root@localhost test]# ls -al 
    -rw-r--r--    1   root   root   191   Jan  6 2016 tempfile

输入命令后，每行显示一个文件，每个文件有上述几列，分别代表以下含义：

(1)第一列：文件类型和权限

第一个字符代表这个文件的类型，如：目录(d)、文件(-)、连接(l)、可供存储的接口设备(b)、串行端口设备(c)等。
比较常见的是d代表它是一个目录，-代表是一个文件。

第一列中接下来的9个字符，以3个为一组，共3组。这3组分别对应的是“文件所有者的权限(owner)”、“同用户组的权限(group)”和“其他非本用户组用户的权限(others)”。
每组的三个字符是rwx的这三个参数的组合，其中[r]代表可读(read)、[w]代表可写(write)、[x]代表可执行(execute)。要注意的是，这3个权限的位置不会改变，如果没有对应的权限，则该位置用-代替。

对应的，当用命令来更改权限(如chmod)时，可用数字类型进行更改。即，每个权限均可以用一个数字来描述。

每个文件的权限分为3组，每组分别对应0~7的一个数字，这样每个文件权限对应一个3位数。

对于每种身份(owner、group、others)的各自三个权限(r、w、x)分别对应数字4、2、1，如果有对应权限，则将对应数字累加。

例如：当权限为-rwxr-x---时，数字为：

    owner = rwx = 4+2+1 = 7
    group = r-x = 4+0+1 = 5
    others = --- = 0+0+0 = 0

因此，该文件的权限数字为750


(2)第二列：多少个文件名连接到此节点

(3)第三列：这个文件的“所有者账号”

(4)第四列：这个文件的所属用户组

(5)第五列：这个文件的大小，单位为B

(6)第六列：这个文件的创建日期或最新修改日期

(7)第七列：文件名



****


<h2 id="2">2.chgrp命令 </h2>



**1.命令格式**

    nl [参数] 文件

**2.命令功能**

添加行号打印文件，类似于cat -n，但nl命令有更多的显示设计。

**3.常用参数**

-b: 指定行号指定的方式，主要有两种：

   -b a: 空行也列出行号(类似于cat -n)

   -b t: 空行不列出行号(类似于cat -b，默认值)

-n: 列出行号表示的方法，主要有三种:

   -n ln: 行号在屏幕的最左方显示

   -n rn: 行号在自己字段的最右方显示，空白位不加0

   -n rz: 行号在自己字段的最右方显示，空白位加0

-w: 指定行号字段占用的位数


**4.常用范例**

**例:** 用nl列出 /etc/issue的内容

    [root@localhost ~]# nl /etc/issue
       1  CentOS release 5.3 (Final)
       2  Kernel \r on an \m
    
    #文件事实上有三行，但nl默认不对空白行编号，即默认参数为-b t。如果需要为空白行加编号可用-b a参数。
    [root@localhost ~]# nl -b a /etc/issue
       1  CentOS release 5.3 (Final)
       2  Kernel \r on an \m
       3
    #可以看到编号前面是有空白的，如何让空白处补0呢？如下面，用-n rz参数。
    [root@localhost ~]# nl -b a -n rz /etc/issue
    000001  CentOS release 5.3 (Final)
    000002  Kernel \r on an \m
    000003
    #字段共6位数，不足6位前面补0.如何将字段改成3位数呢？用-w 3指定。
    [root@localhost ~]# nl -b a -n rz -w 3/etc/issue
    001  CentOS release 5.3 (Final)
    002  Kernel \r on an \m
    003
    

****


<h2 id="3">3.more和less </h2>

cat、tac和nl的不足是，会将文件全部内容显示出来。如果文件太长，想一页一页查看，就可以用more和less命令。

**1.命令格式**

    more 文件名
    less 文件名

**2.命令功能**

让用户一页一页查看文件。

**3.常用参数**

如果more或less后面接的文件内容行数大于屏幕输出的行数，屏幕显示对应信息，由用户决定如何查看。此时用户可以按对应按键进行操作。

**对于more:** 

-空格键：向下翻一页

-Enter：向下滚动一行

-/字符串：向下查询“字符串”这个关键字

-:f：立即显示文件名以及目前显示的行数

-q：离开more，不再继续显示内容

-b或按[ctrl]-b：代表往回翻页(只对文件有用，对管道无用)


**对于less:**

-空格键：向下翻一页

-[PageDown]：向下翻一页

-[PageUp]：向上翻一页

-/字符串：向下查询“字符串”这个关键字

-?字符串：向上查询“字符串”这个关键字

-n：查询下一个

-N：查询上一个

-q：离开less


****




<h2 id="4">4.head和tail </h2>


**1.命令格式**

    head [-n 数字] 文件
    tail [-n 数字] 文件

**2.命令功能**

head用于选择文件的前面几行，tail用于选择文件的最后几行。



**3.参数说明**

数字指定选择的行数，不指定时默认是10行。

head后接数字如果带-号，则代表除了最后的指定数目行，输出前面的所有行。

tail后接数字如果带+号，则代表除了开始的指定数目行，输出末尾所有行。

**4.常用范例**

设文件test有130行。则：

    [root@localhost ~]# head -n 20 test
    #输出test文件的1~20行
    [root@localhost ~]# head -n -20 test
    #除最后的20行，输出前面的所有行。即输出test文件的1~110行
    [root@localhost ~]# tail -n 20 test
    #输出test文件的最后20行，即111~20行
    [root@localhost ~]# tail -n +20 test
    #除开始的20行，输出后面所有行。即输出test文件的21~130行

可以利用管道输出中间的某些行

    [root@localhost ~]# head -n 20 test | tail -n 10
    #先取文件前20行，再从这20行中取后10行，即输出test文件的第11~20行的内容



****

<h2 id="5">5.od命令 </h2>

本文的上述命令均用于查看纯文本文件的内容。对于一些非文本文件，如执行文件等，由于通常是二进制(binary file)文件，用上述命令读取时会产生类似乱码的数据。

此时可用od命令来读取。

**1.命令格式**

    od [-t 类型] 文件

**2.命令功能**

使用



**3.参数说明**


-t后面可以接各种类型的输出，例如：
a: 利用默认的字符来输出

c: 利用ASCII字符来输出

d[size]: 利用十进制来输出数据，每个整数占用size 个字节

f[size]: 利用浮点数来输出数据，每个数占用size个字节

o[size]: 利用八进制来输出数据，每个数占用size个字节

x[size]: 利用十六进制来输出数据，每个数占用size个字节


**4.常用范例**

**例** 将test这个文件的内容以八进制列出，与ASCII字符做对照

    [root@localhost ~]# od -t oCc test
    0000000 141 142 143 144 145 146 147 150 151 152 153 154 155 156 157 160
              a   b   c   d   e   f   g   h   i   j   k   l   m   n   o   p
    0000020 161 162 163 164 165 166 167 170 171 172 012
              q   r   s   t   u   v   w   x   y   z  \n
    0000033
    #可以看到，以八进制列出的数值，实质上就是对应英文字母的ASCII码


****

转载请注明出处，本文地址：[http://kousw.com/2016/12/Linux-4](http://kousw.com/2016/12/Linux-4) 
